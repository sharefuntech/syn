<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>C10 sample table</title>
	<script src="lib/vue.js"></script>
	<script src="lib/d3.js"></script>
	<style media="screen">
		table {
			border: 2px solid #42b983;
			border-radius: 3px;
			background-color: #fff;
		}

		th {
			background-color: #42b983;
			color: rgba(255, 255, 255, 0.5);
			cursor: pointer;
			-webkit-user-select: none;
			-moz-user-select: none;
			-user-select: none;
		}

		th, td {
			min-width: 120px;
			padding: 10px 20px;
		}

		th.active {
			color: #fff;
		}

		th.active .arrow {
			opacity: 1;
		}

		.arrow {
			display: inline-block;
			vertical-align: middle;
			width: 0;
			height: 0;
			margin-left: 5px;
			opacity: 0.66;
		}

		.arrow .asc {
			border-left: 4px solid transparent;
			border-right: 4px solid transparent;
			border-left: 4px solid #fff;
		}

		.arrow .dsc {
			border-left: 4px solid transparent;
			border-right: 4px solid transparent;
			border-left: 4px solid #fff;
		}

		#search {
			margin-bottom: 10px;
		}
	</style>
</head>
<body>

<!-- component template -->
<script type="text/x-template" id="grid-template">
<table>
	<thead>
		<tr>
			<th v-for='key in columns' @click='sortBy(key)' :class='{active: sortKey == key}'>
				{{key | capitalize}}
				<span class='arrow' :class='sortOrders[key] > 0 ? "asc" : "dsc"'>
				</span>
			</th>
		</tr>
	</thead>
	<tbody>
		<tr v-for='entry in data | filterBy filterKey | orderBy sortKey sortOrders[sortKey]'>
			<td v-for='key in columns'>
				{{entry[key]}}
			</td>
		</tr>
	</tbody>
</table>
</script>

<!-- root element -->
<div id="demo">
	<form action="" id="search">
		Search <input name="query" v-model="searchQuery">
	</form>
	<demo-grid :data='gridData' :columns='gridColumns' :filterKey='searchQuery'></demo-grid>
</div>

<script type="text/javascript">
//register component
Vue.component('demo-grid', {
	template: '#grid-template',
	props: {
		data: Array,
		columns: Array,
		filterKey: String
	},
	data: function() {
		var sortOrders = {};
		this.columns.forEach(function(key) {
			sortOrders[key] = 1;
		});

		return {
			sortKey: '',
			sortOrders: sortOrders
		}
	},
	methods: {
		sortBy: function(key) {
			this.sortKey = key;
			this.sortOrders[key] = this.sortOrders[key] * -1;
		}
	}
});

//vue it
var demo = new Vue({
	el: '#demo',
	data: {
		searchQuery: '',
		gridColumns: ['name', 'power'],
		gridData: [
			{ name: 'chuck', power: Infinity },
			{ name: 'Bruce', power: 9000 },
			{ name: 'Jackie', power: 7000 },
			{ name: 'Jet', power: 8000 }
		]
	}
});
</script>
</body>
</html>
