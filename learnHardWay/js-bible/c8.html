<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>c8 函数</title>
</head>
<body>
<script type="text/javascript">

var obja = {
    name: 'william',
    a: 2,
    b: 5,
    c:9,
    sayname: function() {
        console.log(this.name);
    }
}

var obje = {
    name: 'cook'
}

function not(f) {
    return function() {
        var result = f.apply(this, arguments);
        return !result;
    };
}

// var squareSum = compose(square, sum);
// console.log(squareSum(2, 3));
var sumMulti = compose(multip, sum);
console.log(sumMulti(2, 3));

function compose(f, g) {
    return function() {
        return f.call(this, g.apply(this, arguments));
    };
}
// var even = function(x) {
//     return x % 2 ==0;
// };
//
// var odd = not(even);
//
// var arrEven = [2, 4, 6];
// var arrOdd = [1, 3, 5];
//
// var isOdd = arrOdd.every(odd);
// console.log(isOdd);

// var arr4 = [1,2,3,4,5];
//
// var mean = arr4.reduce(sum) / arr4.length;
// console.log(mean);
// var deviations = arr4.map(function(d) {
//     return d - mean;
// });
// console.log(deviations);

function sum(x, y) {
    return x + y;
}

function square(x) {
    return x * x;
}

function multip(x) {
    return x * 10;
}

function bindIt(y) {
    return this.a + y;
}

// var objbinded = bindIt.bind(obja);
// // console.log(objbinded);
// console.log(objbinded(8));


// obja.sayname.call(obje, obje.name);

// var biggest = max(3, 5, 1, 8);
// var biggest = max.call(obja, 3, 5, 1, 8);
var biggest = max.apply(obja, [obja.a, obja.b, obja.c, 7]);
// console.log(biggest);


// console.log(obja.toString());
// console.log(Object.prototype.toString.call(obja));

var operators = {
    add: function(x, y) {
        return x + y;
    },
    multiply: function(x, y) {
        return x * y;
    }
}
var name = 'global name';
var catchThis = {
    name: 'william',
    // self: this,
    catchThisName: function() {
        var self = this;

        return catchThisName();
        // return catchThisName;
        function catchThisName() {
            //如果直接用this，引用的是全局变量中的name，这也是词法作用域的定义结果；即闭包引用this，并不是直接调用它的外层函数
            // console.log(this.name);
            console.log(self.name);
        }
    }
}
// catchThis.catchThisName();
// catchThis.catchThisName()();

// function catchThis() {
//     var name = 'william';
//     var self = this;
//     return function() {
//         // console.log(this.name);
//         console.log(self.name);
//     }
// }

// console.log(catchThis()());

function constfuns() {
    var funcs = [];
    for (var i = 0; i < 10; i++) {
        funcs[i] = function() {
            return i;
        };
    }
    return funcs;
}

// var funcs = constfuns();
// console.log(funcs[5]());

// var c = cter();
// for (var i = 0; i <5; i++) {
//     console.log(c.count());
// }
// var o = {};
// addPrivateProperty(o, 'Name', function(x) {
//     return typeof x == 'string';
// });
//
// // console.log(o);
// o.setName('william');
// // console.log(o.getName());
// // o.setName(991);
// for (p in o) {
//     console.log(p);
// }

function addPrivateProperty(obj, name, predicate) {
    var value;
    obj['get' + name] = function() {
        return value;
    };

    obj['set' + name] = function(v) {
        if (predicate && !predicate(v)) {
            throw Error('set' + name + ': invalid value ' + v);
        } else {
            value = v;
        }
    };
}

function cter() {
    var n = 0;
    return {
        count: function() {
            return n++;
        },
        reset: function() {
            n = 0;
        }
    }
}

function printer() {
    function output() {
        console.log('run it');
    }
    // return output();
    return output;
}

// printer()();
// console.log(printer());

// var scope = 'global scope';
// function checkScope() {
//     var scope = 'local scope';
//     function f() {
//         return scope;
//     }
//     return f;
// }
// console.log(checkScope()());

// var scope = 'global scope';
// function checkScope() {
//     var scope = 'local scope';
//     function f() {
//         return scope;
//     }
//     return f();
// }
// console.log(checkScope());

// (function() {
//     console.log('auto run');
// }());

// uniqueInteger.counter = 0;
//
// for (var i = 0; i < 5; i++) {
//     console.log(uniqueInteger());
// }

function uniqueInteger() {
    return ++uniqueInteger.counter;
    return uniqueInteger.counter++;
}
// var arr3 = [3, 5, 1, 2, 9];
// console.log(arr3.sort(comparetor));


function comparetor(a, b) {
    if (a < b) {
        return -1;
    } else if (a > b) {
        return 1;
    } else {
        return 0;
    }
}
// var rst1 = op(operators.add, op(operators.multiply, 2, 3), op(operators.multiply, 2, 3));
// console.log(rst1);

function add(x, y) {
    return x + y;
}

function multiply(x, y) {
    return x * y;
}

function op(operator, a, b) {
    return operator(a, b);
}
// var arr2 = [factorial, 3];
// console.log(arr2[0](arr2[1]));

// var objc = {
//     f: factorial
// }
// console.log(objc.f(5));
// var f = factorial;
// console.log(f(3));
// var factorial = function(x) {
//     if (x <= 1) {
//         return 1;
//     }
//     return x * factorial(x - 1);
// }
function factorial(x) {
    if (x <= 1) {
        return 1;
    }
    return x * factorial(x - 1);
}

// console.log(factorial(4));

// var a1 = [1, 3, 5];
// a1[0] = null;
// console.log(a1);

// var largest = max(2, 5, 3, 7, 8);
// console.log(largest);

// var propertyCollection = getProperty(obja);
// console.log(propertyCollection);

function getProperty(obj, /*optional*/ arr) {
    // if (arr === undefined) {
    //     arr = [];
    // }
    arr = arr || [];
    for (var property in obj) {
        arr.push(property);
    }
    return arr;
}

function max() {
    var max = Number.NEGATIVE_INFINITY;
    for (var i = 0; i < arguments.length; i++) {
        if (arguments[i] > max) {
            max = arguments[i];
        }
    }
    return max;
}


var objb = {
    name: 'cook',
    age: 33
}

// obja.sayname();
// obja.sayname.call(objb);

var o = {
    m: function() {
        var self = this;
        console.log(this === o);
        f();

        function f() {
            console.log(this === o);
            console.log(self === o);
        }
    }
}
// o.m();
</script>
</body>
</html>
